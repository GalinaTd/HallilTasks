<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Lesson11</title> 
</head>
<style type="text/css">
   .square {
        width: 120px;
        height: 120px;
        float: left;        
        margin-left: 30px;
        margin-bottom: 30px;        
   }
   .radius {border-radius: 10px;}
   .box {
       clear:both;
       margin: 50px;        
       width: 300px;
       height: 50px;       
       box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);      
       }
   .border {border: 1px solid black;}

</style>

<body>
    <h1>Занятие 11. Работа с DOM, события.</h1>
    <div class="box radius">Функция добавляет/удаляет класс css</div> 
   
    <div class="container">     
     <button type="button" id="btn1" class="square"></button>
     <button type="button" id="btn2" class="square"></button>
     <button type="button" id="btn3" class="square"></button>
     <button type="button" id="btn4" class="square"></button>
     <button type="button" id="btn5" class="square"></button>
    </div>

           
    <script>
        'use strict';
       
        const $buttons = document.querySelectorAll('button'); 
       
        //console.log($buttons);  

        // вешаем обработку клика для кнопки 
         $buttons.forEach(function(btn){            
            btn.addEventListener('click', changeColor);  
            btn.addEventListener('click', reverseElement);
         });  

        // задание цвета при клике
        function changeColor () {
           let myColor = '';         

           switch (this.id) {
                case 'btn1': myColor = 'blue';
                break;
                case 'btn2': myColor = 'green';
                break;
                case 'btn3': myColor = 'yellow';
                break;
                case 'btn4': myColor = 'blue';
                break;
                case 'btn5': myColor = 'green';
                break;
                default: myColor = 'white';
                break;
            };     
           
           //document.getElementById(this.id).style.background = myColor;
           this.style.background = myColor;
  
        };

       // квадрат по котрому кликнули переставляется в конец 
       //исп. Node.appendChild() добавляет узел в конец списка дочерних элементов указ. род. узла
       function reverseElement () {
           let el = document.getElementById(this.id);
            document.body.appendChild(el);
            //el.append(this);
       };
      
     
     function toggleClass (el, myClass) {
        const myEl = document.querySelector(el); //получили объект  
         
        const classes = myEl.className.split(' '); // сделали массив только из стилей
        
        //проверка есть ли в массиве добавляемый класс, если есть удаляем, если нет добавляем
        const flag = classes.some(function(el) {
           return el === myClass;
        });

        if (flag) {
            const classIndex = classes.findIndex(function(el) { //ищем индекс чтобы удалить класс
                return el === myClass;
            });
            classes.splice(classIndex, 1); // удаляем по индексу 1 элемент
        } else {
            classes.push(myClass); // добавление нового элемента в массив
        }
        myEl.className = classes.join(' '); //собираем в строку и указываем пробел в качестве разделителя
     }
     
     toggleClass('div', 'border');

     // 2 способ добавить/удалить класс
     function toggleClass2 (el, myClass) {
        const myEl = document.querySelector(el); //получили объект 

        if (myEl.classList.contains(myClass)) { //contains проверяет, содержит ли строка заданную подстроку
            myEl.classList.remove(myClass);
        } else {
            myEl.classList.add(myClass); 
        }
        myEl.className;
     };

     //toggleClass2('div', 'border');

     //3 вариант с исп. готового метода toogle
     function toggleClass3 (el, myClass) {
        const myEl = document.querySelector(el); //получили объект 
        return myEl.classList.toggle(myClass);
     }

     //toggleClass3('div', 'box');

    </script> 
    
    
</body>
</html>